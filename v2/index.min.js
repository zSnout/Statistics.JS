!function(t){t.min=function(){return Math.min(...this)},t.max=function(){return Math.max(...this)},t.range=function(){return this.max()-this.min()},t.sum=function(){return this.reduce((t,e)=>t+e)},t.product=function(){return this.reduce((t,e)=>t*e)},t.prod=t.product,t.organize=function(){return this.sort(function(t,e){return t<e?-1:e<t?1:0})},t.frequency=function(){var t=[];return this.map(function(e){-1==t.map(t=>t.item).indexOf(e)?t.push({item:e,count:1}):t[t.map(t=>t.item).indexOf(e)].count++}),t},t.freq=t.frequency,t.frequencyOf=function(t){var e=this.frequency();return-1==e.map(t=>t.item).indexOf(t)?0:e[e.map(t=>t.item).indexOf(t)].count},t.freqOf=t.frequencyOf,t.frequencyObject=function(){var t={};return this.map(e=>e in t?t[e]++:t[e]=1),t},t.freqObj=t.frequencyObject,t.average=function(){return this.sum()/this.length},t.avg=t.average,t.mean=t.average,t.median=function(){var t=this.organize(),e=this.length/2;return this.length%2==0?[t[e-1],t[e]].average():t[e-.5]},t.middle=t.median,t.q2=t.median,t.firstQuartile=function(t=!1){return this.lower(t).median()},t.q1=t.firstQuartile,t.thirdQuartile=function(t=!1){return this.upper(t).median()},t.q3=t.thirdQuartile,t.first=function(){return this.organize()[0]},t.q0=t.first,t.last=function(){return this.organize().reverse()[0]},t.q4=t.last,t.interquartileRange=function(){return this.q3()-this.q1()},t.iqr=t.interquartileRange,t.summary=function(t=!1){return[this.q0(),this.q1(t),this.q2(),this.q3(t),this.q4()]},t.mode=function(){var t=this.frequency(),e=t.map(t=>t.item),n=t.map(t=>t.count),r=n.max();return e.filter((t,e)=>n[e]==r)},t.modeFrequency=function(){return this.frequency().map(t=>t.count).max()},t.modeFreq=t.modeFrequency,t.lower=function(t=!1){var e=this.length%2==0?this.length/2-1:t?this.length/2-.5:this.length/2-1.5;return this.organize().filter((t,n)=>n<=e)},t.upper=function(t=!1){var e=this.length%2==0?this.length/2:t?this.length/2-.5:this.length/2+.5;return this.organize().filter((t,n)=>n>=e)},t.variance=function(t=!1){var e=this.average();return this.map(t=>t-e).map(t=>t*t).sum()/(t?this.length-1:this.length)},t.standardDeviation=function(t=!1){return Math.sqrt(this.variance(t))},t.stdDev=t.standardDeviation,t.meanAbsoluteDeviation=function(){var t=this.average();return this.map(e=>Math.abs(e-t)).average()},t.mad=t.meanAbsoluteDeviation,t.lowerOutliers=function(t="iqr"){var e={iqr:this.q1()-1.5*this.iqr(),stddev:this.mean()-2*this.stdDev(),mad:this.mean()-2*this.mad()};return"string"==typeof t&&t.toLowerCase()in Object.keys(e)&&(t=e[t.toLowerCase()]),"number"!=typeof t&&(t=e.iqr),this.filter(e=>e<t)},t.upperOutliers=function(t="iqr"){var e={iqr:this.q3()+1.5*this.iqr(),stddev:this.mean()+2*this.stdDev(),mad:this.mean()+2*this.mad()};return"string"==typeof t&&t.toLowerCase()in Object.keys(e)&&(t=e[t.toLowerCase()]),"number"!=typeof t&&(t=e.iqr),this.filter(e=>e>t)},t.outliers=function(t,e=t){return this.lowerOutliers(t).concat(this.upperOutliers(e))},t.unique=function(){return this.filter((t,e)=>this.indexOf(t)==e)},t.flatten=function(){return this.flat(1/0)},t.within=function(t=-1/0,e=1/0){return"number"!=typeof t&&(t=-1/0),"number"!=typeof e&&(e=1/0),this.filter(n=>"number"==typeof n&&n>=t&&n<=e)},t.force=function(t=-1/0,e=1/0){if("number"!=typeof t&&(t=-1/0),"number"==typeof e)return this.on(t=>"number"==typeof t,n=>n<t?t:n>e?e:n);e=1/0},t.on=function(t,e){return this.map((n,r,i)=>t(n,r,i)?e(n,r,i):n)}}(Array.prototype),Object.prototype.only=function(){var t=[];function e(n){"number"==typeof n?t.push(n):"function"==typeof n?e(n()):"string"==typeof n?e(n.only()):Array.isArray(n)?Array.from(n).map(e):"object"==typeof n&&Object.values(n).map(e)}return Array.isArray(this)?this.length>0&&this.map(e):Object.values(this).map(e),t},String.prototype.only=function(){var t=this.match(/-?[0-9]+(\.[0-9]+)?/g);return Array.isArray(t)?t.map(Number):[]},Function.prototype.only=function(){return[this()].only()},Number.prototype.only=function(){return[this]},Boolean.prototype.only=function(){return[]};
